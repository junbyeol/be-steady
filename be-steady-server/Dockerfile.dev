FROM node:24-slim

WORKDIR /app

# 패키지 파일 복사
COPY package*.json ./

# 개발용 의존성까지 모두 설치
RUN npm install --legacy-peer-deps

# 소스 코드는 docker-compose의 volume 마운트를 통해 제공되므로 COPY . . 는 생략 가능하지만,
# 초기 실행을 위해 복사해두는 것이 좋습니다.
COPY . .

EXPOSE 3000

# nodemon 실행 (package.json의 dev 스크립트 이용)
CMD ["npm", "run", "dev"]
